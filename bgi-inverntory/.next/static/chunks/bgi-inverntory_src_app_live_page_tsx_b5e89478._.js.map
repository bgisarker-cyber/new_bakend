{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Code%20app/Bgi-terminal-management/bgi-inverntory/src/app/live/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport axios from \"axios\";\r\nimport { Loader2, AlertCircle, RefreshCw } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\n// =============================\r\n// Type Definitions\r\n// =============================\r\ninterface TerminalCounts {\r\n  citybank: number;\r\n  pbl: number;\r\n  ibbl: number;\r\n  mtb: number;\r\n  sdb: number;\r\n}\r\n\r\n// =============================\r\n// Neumorphic Card Component\r\n// =============================\r\nfunction TerminalCard({ \r\n  title, \r\n  value, \r\n  onClick, \r\n  isLoading \r\n}: { \r\n  title: string; \r\n  value: number | undefined | null; \r\n  onClick: () => void;\r\n  isLoading: boolean;\r\n}) {\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={isLoading}\r\n      className=\"\r\n        relative\r\n        w-full max-w-sm sm:w-80 h-40\r\n        rounded-2xl\r\n        bg-[#e6e9ef]\r\n        flex flex-col items-center justify-center\r\n        transition-all duration-300 ease-in-out\r\n        shadow-[10px_10px_18px_rgba(0,0,0,0.18),-8px_-8px_16px_#ffffff]\r\n        hover:shadow-[6px_6px_14px_rgba(0,0,0,0.22),-6px_-6px_14px_#ffffff]\r\n        active:shadow-[inset_6px_6px_12px_rgba(0,0,0,0.25),inset_-6px_-6px_12px_#ffffff]\r\n        disabled:opacity-70 disabled:cursor-not-allowed\r\n        cursor-pointer select-none\r\n        focus:outline-none\r\n      \"\r\n    >\r\n      {/* Loading overlay */}\r\n      {isLoading && (\r\n        <div className=\"absolute inset-0 rounded-2xl bg-white/60 flex items-center justify-center backdrop-blur-sm\">\r\n          <Loader2 className=\"w-8 h-8 text-gray-700 animate-spin\" />\r\n        </div>\r\n      )}\r\n      \r\n      <h2 className=\"text-xl font-semibold text-gray-800 text-center mb-2 tracking-wide\">\r\n        {title}\r\n      </h2>\r\n      \r\n      <div className=\"flex items-baseline gap-2\">\r\n        <p className=\"text-5xl font-extrabold text-gray-800 tracking-wide\">\r\n          {value ?? \"-\"}\r\n        </p>\r\n        <span className=\"text-sm text-gray-600 font-medium\">\r\n          terminals\r\n        </span>\r\n      </div>\r\n    </button>\r\n  );\r\n}\r\n\r\n// =============================\r\n// Main Component\r\n// =============================\r\nexport default function HomePage() {\r\n  const [counts, setCounts] = useState<TerminalCounts | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    fetchTerminalCounts();\r\n  }, []);\r\n\r\n  const fetchTerminalCounts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const token = localStorage.getItem(\"access_token\");\r\n      if (!token) {\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n\r\n      const response = await axios.get(\"http://127.0.0.1:8000/terminals/counts\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      \r\n      if (!response.data || typeof response.data !== 'object') {\r\n        throw new Error(\"Invalid data format from API\");\r\n      }\r\n      \r\n      console.log(\"Terminal counts loaded:\", response.data);\r\n      setCounts(response.data);\r\n    } catch (err: any) {\r\n      console.error(\"Error fetching terminal counts:\", err);\r\n      setError(err.response?.data?.detail || err.message || \"Failed to load terminal data\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const bankData = [\r\n    { name: \"CBPLC Terminals\", value: counts?.citybank, route: \"/citybank\", key: \"citybank\" },\r\n    { name: \"PBPLC Terminals\", value: counts?.pbl, route: \"/pubalibank\", key: \"pbl\" },\r\n    { name: \"IBBPLC Terminals\", value: counts?.ibbl, route: \"/islamibank\", key: \"ibbl\" },\r\n    { name: \"MTBPLC Terminals\", value: counts?.mtb, route: \"/mtbbank\", key: \"mtb\" },\r\n    { name: \"SBPLC Terminals\", value: counts?.sdb, route: \"/standardbank\", key: \"sdb\" },\r\n  ];\r\n\r\n  // Show error UI if API fails\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col items-center justify-center bg-[#e6e9ef] p-4\">\r\n        <div className=\"bg-white p-6 rounded-2xl shadow-lg text-center max-w-md\">\r\n          <AlertCircle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-2\">Error Loading Data</h2>\r\n          <p className=\"text-gray-600 mb-4\">{error}</p>\r\n          <div className=\"flex gap-2 justify-center\">\r\n            <Button \r\n              onClick={fetchTerminalCounts}\r\n              className=\"flex items-center gap-2 bg-[#1F628E] hover:bg-[#164A73] text-white px-4 py-2 rounded-lg\"\r\n            >\r\n              <RefreshCw className=\"w-4 h-4\" />\r\n              Retry\r\n            </Button>\r\n            <Button \r\n              onClick={() => router.push(\"/dashboard\")}\r\n              className=\"bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg\"\r\n            >\r\n              Dashboard\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col items-center bg-[#e6e9ef]\">\r\n      <header className=\"w-full flex flex-col items-center mt-12 py-6\">\r\n        <h1 className=\"text-2xl md:text-3xl font-bold text-gray-800 tracking-wide text-center\">\r\n          BGI LIVE TERMINALS\r\n        </h1>\r\n        <p className=\"text-gray-600 mt-2 text-center\">\r\n          Real-time terminal counts across all banks\r\n        </p>\r\n      </header>\r\n\r\n      <main className=\"flex-1 flex flex-col justify-start items-center w-full p-6 md:p-10\">\r\n        {loading ? (\r\n          <div className=\"flex flex-col items-center gap-4\">\r\n            <Loader2 className=\"w-10 h-10 text-gray-700 animate-spin\" />\r\n            <p className=\"text-gray-600 text-lg\">Loading terminal data...</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-10 mt-8 max-w-7xl w-full\">\r\n            {bankData.map((btn) => (\r\n              <TerminalCard\r\n                key={btn.key}\r\n                title={btn.name}\r\n                value={btn.value}\r\n                onClick={() => router.push(btn.route)}\r\n                isLoading={loading}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      <footer className=\"w-full py-8 flex flex-col items-center\">\r\n        <p className=\"text-gray-500 text-sm text-center\">\r\n          © {new Date().getFullYear()} BGI • All Rights Reserved\r\n        </p>\r\n        <p className=\"text-gray-400 text-xs mt-1\">\r\n          Dashboard refreshes automatically every 30 seconds\r\n        </p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;AANA;;;;;;AAmBA,gCAAgC;AAChC,4BAA4B;AAC5B,gCAAgC;AAChC,SAAS,aAAa,KAUrB;QAVqB,EACpB,KAAK,EACL,KAAK,EACL,OAAO,EACP,SAAS,EAMV,GAVqB;IAWpB,qBACE,kNAAC;QACC,SAAS;QACT,UAAU;QACV,WAAU;;YAgBT,2BACC,kNAAC;gBAAI,WAAU;0BACb,cAAA,kNAAC,oPAAO;oBAAC,WAAU;;;;;;;;;;;0BAIvB,kNAAC;gBAAG,WAAU;0BACX;;;;;;0BAGH,kNAAC;gBAAI,WAAU;;kCACb,kNAAC;wBAAE,WAAU;kCACV,kBAAA,mBAAA,QAAS;;;;;;kCAEZ,kNAAC;wBAAK,WAAU;kCAAoC;;;;;;;;;;;;;;;;;;AAM5D;KAnDS;AAwDM,SAAS;;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,8LAAQ,EAAwB;IAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,8LAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,8LAAQ,EAAgB;IAClD,MAAM,SAAS,IAAA,uKAAS;IAExB,IAAA,+LAAS;8BAAC;YACR;QACF;6BAAG,EAAE;IAEL,MAAM,sBAAsB;QAC1B,IAAI;YACF,WAAW;YACX,SAAS;YAET,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;gBACV,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,MAAM,WAAW,MAAM,wKAAK,CAAC,GAAG,CAAC,0CAA0C;gBACzE,SAAS;oBAAE,eAAe,AAAC,UAAe,OAAN;gBAAQ;YAC9C;YAEA,IAAI,CAAC,SAAS,IAAI,IAAI,OAAO,SAAS,IAAI,KAAK,UAAU;gBACvD,MAAM,IAAI,MAAM;YAClB;YAEA,QAAQ,GAAG,CAAC,2BAA2B,SAAS,IAAI;YACpD,UAAU,SAAS,IAAI;QACzB,EAAE,OAAO,KAAU;gBAER,oBAAA;YADT,QAAQ,KAAK,CAAC,mCAAmC;YACjD,SAAS,EAAA,gBAAA,IAAI,QAAQ,cAAZ,qCAAA,qBAAA,cAAc,IAAI,cAAlB,yCAAA,mBAAoB,MAAM,KAAI,IAAI,OAAO,IAAI;QACxD,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,WAAW;QACf;YAAE,MAAM;YAAmB,KAAK,EAAE,mBAAA,6BAAA,OAAQ,QAAQ;YAAE,OAAO;YAAa,KAAK;QAAW;QACxF;YAAE,MAAM;YAAmB,KAAK,EAAE,mBAAA,6BAAA,OAAQ,GAAG;YAAE,OAAO;YAAe,KAAK;QAAM;QAChF;YAAE,MAAM;YAAoB,KAAK,EAAE,mBAAA,6BAAA,OAAQ,IAAI;YAAE,OAAO;YAAe,KAAK;QAAO;QACnF;YAAE,MAAM;YAAoB,KAAK,EAAE,mBAAA,6BAAA,OAAQ,GAAG;YAAE,OAAO;YAAY,KAAK;QAAM;QAC9E;YAAE,MAAM;YAAmB,KAAK,EAAE,mBAAA,6BAAA,OAAQ,GAAG;YAAE,OAAO;YAAiB,KAAK;QAAM;KACnF;IAED,6BAA6B;IAC7B,IAAI,OAAO;QACT,qBACE,kNAAC;YAAI,WAAU;sBACb,cAAA,kNAAC;gBAAI,WAAU;;kCACb,kNAAC,2PAAW;wBAAC,WAAU;;;;;;kCACvB,kNAAC;wBAAG,WAAU;kCAA2C;;;;;;kCACzD,kNAAC;wBAAE,WAAU;kCAAsB;;;;;;kCACnC,kNAAC;wBAAI,WAAU;;0CACb,kNAAC,oKAAM;gCACL,SAAS;gCACT,WAAU;;kDAEV,kNAAC,qPAAS;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAGnC,kNAAC,oKAAM;gCACL,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;IAOX;IAEA,qBACE,kNAAC;QAAI,WAAU;;0BACb,kNAAC;gBAAO,WAAU;;kCAChB,kNAAC;wBAAG,WAAU;kCAAyE;;;;;;kCAGvF,kNAAC;wBAAE,WAAU;kCAAiC;;;;;;;;;;;;0BAKhD,kNAAC;gBAAK,WAAU;0BACb,wBACC,kNAAC;oBAAI,WAAU;;sCACb,kNAAC,oPAAO;4BAAC,WAAU;;;;;;sCACnB,kNAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;yCAGvC,kNAAC;oBAAI,WAAU;8BACZ,SAAS,GAAG,CAAC,CAAC,oBACb,kNAAC;4BAEC,OAAO,IAAI,IAAI;4BACf,OAAO,IAAI,KAAK;4BAChB,SAAS,IAAM,OAAO,IAAI,CAAC,IAAI,KAAK;4BACpC,WAAW;2BAJN,IAAI,GAAG;;;;;;;;;;;;;;;0BAWtB,kNAAC;gBAAO,WAAU;;kCAChB,kNAAC;wBAAE,WAAU;;4BAAoC;4BAC5C,IAAI,OAAO,WAAW;4BAAG;;;;;;;kCAE9B,kNAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;;;;;;;AAMlD;GArHwB;;QAIP,uKAAS;;;MAJF","debugId":null}}]
}