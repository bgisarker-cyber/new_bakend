{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///D:/Code%20app/Bgi-terminal-management/bgi-inverntory/src/app/task-manager/create-task/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport { QueryClient, QueryClientProvider, useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport axios from \"axios\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport { Save as SaveIcon } from \"@mui/icons-material\"; // FIXED: Removed AssignIcon\r\n\r\n/* ---------- config ---------- */\r\naxios.defaults.baseURL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000\";\r\naxios.interceptors.request.use((cfg) => {\r\n  const t = localStorage.getItem(\"access_token\");\r\n  if (t) cfg.headers.Authorization = `Bearer ${t}`;\r\n  return cfg;\r\n});\r\n\r\n/* ---------- types ---------- */\r\ntype User = { id: number; username: string; role: string };\r\ntype Bank = { id: number; name: string };\r\ntype ProblemType = { id: number; name: string };\r\ntype Task = {\r\n  id: number;\r\n  bank: string;\r\n  merchant_name?: string;\r\n  tid: string;\r\n  mid: string;\r\n  address?: string;\r\n  task_type: string;\r\n  phone?: string;\r\n  operator?: string;\r\n  problem_type?: string;\r\n  assigned_to: number;\r\n  comment?: string;\r\n  sim_serial?: string;\r\n};\r\n\r\ntype FormInputs = {\r\n  bank: string;\r\n  merchant_name?: string;\r\n  tid: string;\r\n  mid: string;\r\n  address?: string;\r\n  task_type: \"New Install\" | \"Replacement\" | \"Call\";\r\n  phone?: string;\r\n  operator?: string;\r\n  problem_type?: string;\r\n  assigned_to: number | null;\r\n  comment?: string;\r\n  sim_serial?: string;\r\n};\r\n\r\n// Static operator options\r\nconst OPERATOR_OPTIONS = [\"ROBI\", \"GRAMEENPHONE\", \"BANGLALINK\"];\r\n\r\n/* ---------- query hooks ---------- */\r\nconst queryClient = new QueryClient();\r\n\r\nfunction useAssignableUsers() {\r\n  return useQuery({\r\n    queryKey: [\"assignable-users\"],\r\n    queryFn: async () => (await axios.get<User[]>(\"/auth/userlist?role=support,admin\")).data,\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n}\r\n\r\nfunction useBanks() {\r\n  return useQuery({\r\n    queryKey: [\"banks\"],\r\n    queryFn: async () => (await axios.get<Bank[]>(\"/tasks/banks\")).data,\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n}\r\n\r\nfunction useProblemTypes() {\r\n  return useQuery({\r\n    queryKey: [\"problem-types\"],\r\n    queryFn: async () => (await axios.get<ProblemType[]>(\"/tasks/problem-types\")).data,\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n}\r\n\r\n/* ---------- form component ---------- */\r\nfunction TaskForm({ taskId }: { taskId?: string }) {\r\n  const router = useRouter();\r\n  const isEditMode = Boolean(taskId);\r\n  \r\n  const [msg, setMsg] = useState<{ type: \"success\" | \"error\"; text: string } | null>(null);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    control,\r\n    watch,\r\n    reset,\r\n    setValue,\r\n    formState: { errors },\r\n  } = useForm<FormInputs>({\r\n    defaultValues: { \r\n      task_type: \"Call\", \r\n      assigned_to: null, \r\n      address: \"\", \r\n      phone: \"\", \r\n      operator: \"\",\r\n      problem_type: \"\",\r\n      comment: \"\",\r\n      tid: \"\",\r\n      mid: \"\",\r\n      sim_serial: \"\",\r\n    },\r\n  });\r\n\r\n  const { data: users = [], isLoading: loadingUsers } = useAssignableUsers();\r\n  const { data: banks = [], isLoading: loadingBanks } = useBanks();\r\n  const { data: problemTypes = [], isLoading: loadingProblemTypes } = useProblemTypes();\r\n\r\n  // Fetch task data if in edit mode\r\n  const { isLoading: loadingTask } = useQuery({\r\n    queryKey: [\"task\", taskId],\r\n    queryFn: async () => {\r\n      if (!taskId) return null;\r\n      const response = await axios.get<Task>(`/tasks/${taskId}`);\r\n      const data = response.data;\r\n      \r\n      // Pre-fill form\r\n      Object.entries(data).forEach(([key, value]) => {\r\n        setValue(key as keyof FormInputs, value as any, { shouldValidate: true });\r\n      });\r\n      \r\n      return data;\r\n    },\r\n    enabled: isEditMode,\r\n    staleTime: 0,\r\n  });\r\n\r\n  const selectedTaskType = watch(\"task_type\");\r\n  const isCallTask = selectedTaskType === \"Call\";\r\n\r\n  const mutation = useMutation({\r\n    mutationFn: async (data: FormInputs) => {\r\n      const payload = {\r\n        ...data,\r\n        assigned_to: data.assigned_to,\r\n        assigned_by: Number(localStorage.getItem(\"userId\") || 1),\r\n        problem_type: isCallTask ? data.problem_type : null,\r\n      };\r\n      \r\n      if (isEditMode) {\r\n        return axios.put(`/tasks/${taskId}`, payload);\r\n      } else {\r\n        return axios.post(\"/tasks/create\", payload);\r\n      }\r\n    },\r\n    onSuccess: () => {\r\n      setMsg({ \r\n        type: \"success\", \r\n        text: isEditMode ? \"Task updated successfully!\" : \"Task created successfully!\" \r\n      });\r\n      queryClient.invalidateQueries({ queryKey: [\"tasks\"] });\r\n      if (!isEditMode) {\r\n        reset({ \r\n          task_type: \"Call\", \r\n          assigned_to: null, \r\n          address: \"\", \r\n          phone: \"\", \r\n          operator: \"\",\r\n          problem_type: \"\",\r\n          comment: \"\",\r\n          tid: \"\",\r\n          mid: \"\",\r\n          sim_serial: \"\",\r\n        });\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      setMsg({ \r\n        type: \"error\", \r\n        text: error.response?.data?.detail || \"Network error\" \r\n      });\r\n    },\r\n  });\r\n\r\n  const onSubmit = async (data: FormInputs) => {\r\n    // Validate field lengths on frontend too\r\n    if (data.tid.length !== 8) {\r\n      setMsg({ type: \"error\", text: \"TID must be exactly 8 characters\" });\r\n      return;\r\n    }\r\n    if (data.mid.length !== 15) {\r\n      setMsg({ type: \"error\", text: \"MID must be exactly 15 characters\" });\r\n      return;\r\n    }\r\n    if (data.sim_serial && data.sim_serial.length > 30) {\r\n      setMsg({ type: \"error\", text: \"SIM Serial must be 30 characters or less\" });\r\n      return;\r\n    }\r\n    \r\n    if (!data.assigned_to) {\r\n      setMsg({ type: \"error\", text: \"Please select an assignee\" });\r\n      return;\r\n    }\r\n    if (data.task_type === \"Call\" && !data.problem_type) {\r\n      setMsg({ type: \"error\", text: \"Problem type is required for Call tasks\" });\r\n      return;\r\n    }\r\n    \r\n    setMsg(null);\r\n    mutation.mutate(data);\r\n  };\r\n\r\n  const isLoading = loadingUsers || loadingBanks || loadingProblemTypes || loadingTask || mutation.isPending;\r\n\r\n  if (isLoading && isEditMode) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-[#f0f2f5]\">\r\n        <div className=\"bg-[#f0f2f5] rounded-2xl p-8 shadow-[10px_10px_18px_rgba(0,0,0,0.08),-8px_-8px_16px_#ffffff]\">\r\n          <div className=\"w-10 h-10 border-4 border-gray-200 border-t-gray-700 rounded-full animate-spin\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#f0f2f5] p-3 sm:p-4 md:p-5\">\r\n      <div className=\"max-w-5xl mx-auto\">\r\n        {/* Header - Centered, no background box, no button */}\r\n        <div className=\"text-center mb-4\">\r\n          <h1 className=\"text-2xl font-bold text-gray-800 tracking-wide\">\r\n            {isEditMode ? \"Edit Task\" : \"Create New (POS CALL)\"}\r\n          </h1>\r\n        </div>\r\n\r\n        {msg && (\r\n          <div className={`mb-4 p-3 rounded-2xl shadow-[4px_4px_8px_rgba(0,0,0,0.06),-4px_-4px_8px_#ffffff] ${\r\n            msg.type === \"success\" ? \"bg-green-100 text-green-800\" : \"bg-red-100 text-red-800\"\r\n          } font-semibold`}>\r\n            {msg.text}\r\n          </div>\r\n        )}\r\n\r\n        {/* Form Card - Reduced padding */}\r\n        <div className=\"bg-[#f0f2f5] rounded-2xl shadow-[6px_6px_12px_rgba(0,0,0,0.06),-6px_-6px_12px_#ffffff] p-4\">\r\n          <form onSubmit={handleSubmit(onSubmit)}>\r\n            <div className=\"space-y-4\">\r\n              {/* Section 1: Basic Information - Reduced padding */}\r\n              <div className=\"bg-[#f0f2f5] rounded-xl shadow-[inset_2px_2px_4px_rgba(0,0,0,0.05),inset_-2px_-2px_4px_#ffffff] p-4\">\r\n                \r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                  {/* Bank */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">Bank *</label>\r\n                    <Controller\r\n                      name=\"bank\"\r\n                      control={control}\r\n                      rules={{ required: \"Bank is required\" }}\r\n                      render={({ field }) => (\r\n                        <select\r\n                          {...field}\r\n                          className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px_6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff]\"\r\n                        >\r\n                          <option value=\"\">Select Bank</option>\r\n                          {banks.map((bank) => (\r\n                            <option key={bank.id} value={bank.name}>\r\n                              {bank.name}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      )}\r\n                    />\r\n                    {errors.bank && <p className=\"text-red-600 text-xs mt-1\">{errors.bank.message}</p>}\r\n                  </div>\r\n\r\n                  {/* Merchant Name - Optional */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">DBA Name</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      {...register(\"merchant_name\")}\r\n                      className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px_6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff]\"\r\n                      placeholder=\"Enter Dba name (optional)\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* TID */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">TID * (8 characters)</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      {...register(\"tid\", { \r\n                        required: \"TID is required\",\r\n                        minLength: { value: 8, message: \"TID must be exactly 8 characters\" },\r\n                        maxLength: { value: 8, message: \"TID must be exactly 8 characters\" }\r\n                      })}\r\n                      className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px_6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff]\"\r\n                      placeholder=\"Enter 8-digit TID\"\r\n                      maxLength={8}\r\n                    />\r\n                    {errors.tid && <p className=\"text-red-600 text-xs mt-1\">{errors.tid.message}</p>}\r\n                  </div>\r\n\r\n                  {/* MID */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">MID * (15 characters)</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      {...register(\"mid\", { \r\n                        required: \"MID is required\",\r\n                        minLength: { value: 15, message: \"MID must be exactly 15 characters\" },\r\n                        maxLength: { value: 15, message: \"MID must be exactly 15 characters\" }\r\n                      })}\r\n                      className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px_6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff]\"\r\n                      placeholder=\"Enter 15-digit MID\"\r\n                      maxLength={15}\r\n                    />\r\n                    {errors.mid && <p className=\"text-red-600 text-xs mt-1\">{errors.mid.message}</p>}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Section 2: Task Details - Reduced padding */}\r\n              <div className=\"bg-[#f0f2f5] rounded-xl shadow-[inset_2px_2px_4px_rgba(0,0,0,0.05),inset_-2px_-2px_4px_#ffffff] p-4\">\r\n               \r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                  {/* Task Type */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">Task Type *</label>\r\n                    <Controller\r\n                      name=\"task_type\"\r\n                      control={control}\r\n                      rules={{ required: \"Task type is required\" }}\r\n                      render={({ field }) => (\r\n                        <select\r\n                          {...field}\r\n                          className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px_6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff]\"\r\n                        >\r\n                          <option value=\"New Install\">New Install</option>\r\n                          <option value=\"Replacement\">Replacement</option>\r\n                          <option value=\"Call\">Call</option>\r\n                        </select>\r\n                      )}\r\n                    />\r\n                    {errors.task_type && <p className=\"text-red-600 text-xs mt-1\">{errors.task_type.message}</p>}\r\n                  </div>\r\n\r\n                  {/* Assign To */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">Assign To *</label>\r\n                    <Controller\r\n                      name=\"assigned_to\"\r\n                      control={control}\r\n                      rules={{ required: \"Please select an assignee\" }}\r\n                      render={({ field }) => (\r\n                        <div className=\"relative\">\r\n                          <select\r\n                            value={field.value || \"\"}\r\n                            onChange={(e) => field.onChange(e.target.value ? parseInt(e.target.value) : null)}\r\n                            className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px_6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff] appearance-none\"\r\n                          >\r\n                            <option value=\"\">Select Assignee</option>\r\n                            {users.map((user) => (\r\n                              <option key={user.id} value={user.id}>\r\n                                {user.username} ({user.role})\r\n                              </option>\r\n                            ))}\r\n                          </select>\r\n                          <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-600\">\r\n                            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n                            </svg>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    />\r\n                    {errors.assigned_to && <p className=\"text-red-600 text-xs mt-1\">{errors.assigned_to.message}</p>}\r\n                  </div>\r\n\r\n                  {/* Conditional Problem Type */}\r\n                  {isCallTask && (\r\n                    <div className=\"md:col-span-2\">\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-1\">Problem Type *</label>\r\n                      <Controller\r\n                        name=\"problem_type\"\r\n                        control={control}\r\n                        rules={{ required: isCallTask ? \"Problem type is required\" : false }}\r\n                        render={({ field }) => (\r\n                          <select\r\n                            {...field}\r\n                            className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px_6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff]\"\r\n                          >\r\n                            <option value=\"\">Select Problem Type</option>\r\n                            {problemTypes.map((pt) => (\r\n                              <option key={pt.id} value={pt.name}>\r\n                                {pt.name}\r\n                              </option>\r\n                            ))}\r\n                          </select>\r\n                        )}\r\n                      />\r\n                      {errors.problem_type && <p className=\"text-red-600 text-xs mt-1\">{errors.problem_type.message}</p>}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Section 3: Additional Information - Reduced padding */}\r\n              <div className=\"bg-[#f0f2f5] rounded-xl shadow-[inset_2px_2px_4px_rgba(0,0,0,0.05),inset_-2px_-2px_4px_#ffffff] p-4\">\r\n               \r\n                <div className=\"grid grid-cols-1 gap-3\">\r\n                  {/* Address and Phone - Same row */}\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-1\">ADDRESS</label>\r\n                      <textarea\r\n                        {...register(\"address\")}\r\n                        className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff] resize-none\"\r\n                        rows={3}\r\n                        placeholder=\"Enter merchant address (optional)\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-1\">PHONE</label>\r\n                      <input\r\n                        type=\"tel\"\r\n                        {...register(\"phone\")}\r\n                        className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px_6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff]\"\r\n                        placeholder=\"Enter phone number (optional)\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Operator and Sim Serial - Same row */}\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-1\">OPERATOR</label>\r\n                      <Controller\r\n                        name=\"operator\"\r\n                        control={control}\r\n                        render={({ field }) => (\r\n                          <select\r\n                            {...field}\r\n                            className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px_6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff]\"\r\n                          >\r\n                            <option value=\"\">Select Operator (optional)</option>\r\n                            {OPERATOR_OPTIONS.map((op) => (\r\n                              <option key={op} value={op}>\r\n                                {op}\r\n                              </option>\r\n                            ))}\r\n                          </select>\r\n                        )}\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-1\">SIM Serial</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        {...register(\"sim_serial\", { \r\n                          maxLength: { value: 30, message: \"SIM Serial must be 30 characters or less\" }\r\n                        })}\r\n                        className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px_6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff]\"\r\n                        placeholder=\"Enter SIM serial number (optional)\"\r\n                        maxLength={30}\r\n                      />\r\n                      {errors.sim_serial && <p className=\"text-red-600 text-xs mt-1\">{errors.sim_serial.message}</p>}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Comment */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">COMMENT</label>\r\n                    <textarea\r\n                      {...register(\"comment\")}\r\n                      className=\"w-full px-3 py-2 rounded-lg bg-[#f0f2f5] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1),inset_-2px_-2px_4px_#ffffff] border-0 text-gray-800 focus:outline-none focus:shadow-[inset_2px_2px_6px_rgba(0,0,0,0.15),inset_-2px_-2px_6px_#ffffff] resize-none\"\r\n                      rows={3}\r\n                      placeholder=\"Add any additional comments (optional)\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Submit Button - Reduced padding */}\r\n              <div className=\"pt-2\">\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={mutation.isPending}\r\n                  className=\"w-full bg-[#f0f2f5] text-gray-800 py-3 rounded-2xl font-bold shadow-[4px_4px_8px_rgba(0,0,0,0.06),-4px_-4px_8px_#ffffff] hover:shadow-[2px_2px_6px_rgba(0,0,0,0.08),-2px_-2px_6px_#ffffff] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.12),inset_-2px_-2px_4px_#ffffff] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base\"\r\n                >\r\n                  {mutation.isPending ? (\r\n                    <div className=\"w-5 h-5 border-2 border-gray-200 border-t-gray-700 rounded-full animate-spin\"></div>\r\n                  ) : isEditMode ? (\r\n                    <>\r\n                      <SaveIcon className=\"w-4 h-4\" />\r\n                      Update Task\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <SaveIcon className=\"w-4 h-4\" />\r\n                      Create Task\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ---------- page wrapper ---------- */\r\nexport default function TaskManagerPage() {\r\n  const params = useParams();\r\n  const taskId = params?.taskId as string | undefined;\r\n  \r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <TaskForm taskId={taskId} />\r\n    </QueryClientProvider>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}