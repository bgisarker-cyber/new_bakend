{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/E_Slip/e-receipt/src/app/receipts/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport DataTable, { TableColumn } from \"react-data-table-component\";\r\n\r\n// ==========================\r\n// TypeScript Transaction Type\r\n// ==========================\r\ntype Transaction = {\r\n  id: number;\r\n  merchant_name: string;\r\n  merchant_address: string;\r\n  txn_date: string;\r\n  txn_time: string;\r\n  mid: number;\r\n  tid: number;\r\n  batch_no: number;\r\n  stan: number;\r\n  txn_type: string;\r\n  pan_number: string;\r\n  exp_date: string;\r\n  invoice_number: number;\r\n  card_type: string;\r\n  entry_mode: string;\r\n  approval_code: number;\r\n  rrn: string;\r\n  aid: string;\r\n  application_name: string;\r\n  tvr: string;\r\n  tsi: string;\r\n  amount: number;\r\n  email: string;\r\n  mobile: number;\r\n  created_at: string;\r\n};\r\n\r\nconst TransactionsPage = () => {\r\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\r\n  const [filteredTransactions, setFilteredTransactions] = useState<Transaction[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string>(\"\");\r\n\r\n  // Filter states\r\n  const [merchantFilter, setMerchantFilter] = useState<string>(\"\");\r\n  const [tidFilter, setTidFilter] = useState<string>(\"\");\r\n  const [dateFilter, setDateFilter] = useState<string>(\"\");\r\n\r\n  // ==========================\r\n  // Fetch Transactions from API\r\n  // ==========================\r\n  useEffect(() => {\r\n    const fetchTransactions = async () => {\r\n      try {\r\n        const response = await fetch(\"http://127.0.0.1:8000/transactions\"); // Replace with your endpoint\r\n        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\r\n        const data = await response.json();\r\n        setTransactions(data.data);\r\n        setFilteredTransactions(data.data);\r\n      } catch (err: any) {\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchTransactions();\r\n  }, []);\r\n\r\n  // ==========================\r\n  // Filter Logic\r\n  // ==========================\r\n  useEffect(() => {\r\n    const filtered = transactions.filter((txn) => {\r\n      const matchMerchant = txn.merchant_name.toLowerCase().includes(merchantFilter.toLowerCase());\r\n      const matchTid = txn.tid.toString().includes(tidFilter);\r\n      const matchDate = txn.txn_date.includes(dateFilter);\r\n      return matchMerchant && matchTid && matchDate;\r\n    });\r\n    setFilteredTransactions(filtered);\r\n  }, [merchantFilter, tidFilter, dateFilter, transactions]);\r\n\r\n  // ==========================\r\n  // Table Columns\r\n  // ==========================\r\n  const columns: TableColumn<Transaction>[] = [\r\n    { name: \"ID\", selector: (row) => row.id, sortable: true, width: \"60px\" },\r\n    { name: \"Merchant\", selector: (row) => row.merchant_name, sortable: true },\r\n    { name: \"Address\", selector: (row) => row.merchant_address },\r\n    { name: \"Date\", selector: (row) => row.txn_date, sortable: true },\r\n    { name: \"Time\", selector: (row) => row.txn_time },\r\n    { name: \"TID\", selector: (row) => row.tid.toString(), sortable: true },\r\n    { name: \"Card Number\", selector: (row) => row.pan_number },\r\n    { name: \"Amount\", selector: (row) => row.amount.toFixed(2), sortable: true },\r\n    { name: \"Email\", selector: (row) => row.email },\r\n    { name: \"Mobile\", selector: (row) => row.mobile.toString() },\r\n  ];\r\n\r\n  // ==========================\r\n  // Compact Table Styles\r\n  // ==========================\r\n  const customStyles = {\r\n    rows: {\r\n      style: {\r\n        minHeight: \"32px\",\r\n        paddingTop: \"2px\",\r\n        paddingBottom: \"2px\",\r\n      },\r\n    },\r\n    headCells: {\r\n      style: {\r\n        padding: \"8px\",\r\n        fontWeight: \"bold\",\r\n        backgroundColor: \"#f3f4f6\",\r\n      },\r\n    },\r\n    cells: {\r\n      style: {\r\n        padding: \"6px 8px\",\r\n      },\r\n    },\r\n  };\r\n\r\n  if (loading) return <p>Loading transactions...</p>;\r\n  if (error) return <p className=\"text-red-500\">Error: {error}</p>;\r\n\r\n  // ==========================\r\n  // UI Rendering\r\n  // ==========================\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">E-Voucher</h1>\r\n\r\n      {/* Filter Inputs */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Filter by Merchant\"\r\n          value={merchantFilter}\r\n          onChange={(e) => setMerchantFilter(e.target.value)}\r\n          className=\"border border-gray-300 rounded px-3 py-2 w-full\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Filter by TID\"\r\n          value={tidFilter}\r\n          onChange={(e) => setTidFilter(e.target.value)}\r\n          className=\"border border-gray-300 rounded px-3 py-2 w-full\"\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          placeholder=\"Filter by Date\"\r\n          value={dateFilter}\r\n          onChange={(e) => setDateFilter(e.target.value)}\r\n          className=\"border border-gray-300 rounded px-3 py-2 w-full\"\r\n        />\r\n        <button\r\n          onClick={() => {\r\n            setMerchantFilter(\"\");\r\n            setTidFilter(\"\");\r\n            setDateFilter(\"\");\r\n          }}\r\n          className=\"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300 font-medium\"\r\n        >\r\n          Clear Filters\r\n        </button>\r\n      </div>\r\n\r\n      {/* DataTable */}\r\n      <div className=\"bg-white rounded-lg shadow-md p-2\">\r\n        <DataTable\r\n          columns={columns}\r\n          data={filteredTransactions}\r\n          pagination\r\n          highlightOnHover\r\n          striped\r\n          dense\r\n          persistTableHead\r\n          customStyles={customStyles}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionsPage;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}