{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Bgi-terminal-management/e-receipt/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, ChangeEvent } from \"react\";\nimport Image from \"next/image\";\nimport { Menu, X } from \"lucide-react\"; // icon library\n\n/**\n * TypeScript interface for Transaction\n */\ninterface Transaction {\n  id: number;\n  merchant_name: string;\n  merchant_address: string;\n  txn_date: string;\n  txn_time: string;\n  mid: string;\n  tid: string;\n  batch_no: string;\n  stan: string;\n  txn_type: string;\n  pan_number: string;\n  exp_date: string;\n  invoice_number: string;\n  card_type: string;\n  entry_mode: string;\n  approval_code: string;\n  rrn: string;\n  aid: string;\n  application_name: string;\n  tvr: string;\n  tsi: string;\n  amount: number;\n  email: string;\n  mobile: string;\n  created_at: string;\n}\n\n/**\n * Filter fields\n */\ninterface SearchFields {\n  tid: string;\n  mobile: string;\n  txn_type: string;\n}\n\nexport default function DashboardPage() {\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\n  const [filteredData, setFilteredData] = useState<Transaction[]>([]);\n  const [search, setSearch] = useState<SearchFields>({\n    tid: \"\",\n    mobile: \"\",\n    txn_type: \"\",\n  });\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  const [sidebarOpen, setSidebarOpen] = useState<boolean>(false);\n  const itemsPerPage = 6;\n\n  // ✅ Fetch data from FastAPI\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(\"http://127.0.0.1:8000/transactions\");\n        const json = await response.json();\n\n        // Handle possible API response formats\n        const data: Transaction[] = Array.isArray(json)\n          ? json\n          : Array.isArray(json.data)\n          ? json.data\n          : [];\n\n        setTransactions(data);\n        setFilteredData(data);\n      } catch (error) {\n        console.error(\"Error fetching transactions:\", error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  // ✅ Filter logic\n  useEffect(() => {\n    const filtered = transactions.filter((txn) => {\n      const tidMatch = txn.tid\n        ?.toLowerCase()\n        .includes(search.tid.toLowerCase());\n      const mobileMatch = txn.mobile\n        ?.toLowerCase()\n        .includes(search.mobile.toLowerCase());\n      const typeMatch = txn.txn_type\n        ?.toLowerCase()\n        .includes(search.txn_type.toLowerCase());\n      return tidMatch && mobileMatch && typeMatch;\n    });\n\n    setFilteredData(filtered);\n    setCurrentPage(1);\n  }, [search, transactions]);\n\n  // ✅ Pagination logic\n  const totalPages = Math.ceil(filteredData.length / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const currentData = filteredData.slice(startIndex, startIndex + itemsPerPage);\n\n  const handlePageChange = (page: number) => {\n    if (page >= 1 && page <= totalPages) setCurrentPage(page);\n  };\n\n  const handleSearchChange =\n    (field: keyof SearchFields) => (e: ChangeEvent<HTMLInputElement>) => {\n      setSearch({ ...search, [field]: e.target.value });\n    };\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-100 relative\">\n      {/* Mobile Sidebar Toggle */}\n      <button\n        className=\"md:hidden absolute top-4 left-4 z-50 bg-blue-600 text-white p-2 rounded-md shadow-md\"\n        onClick={() => setSidebarOpen(!sidebarOpen)}\n      >\n        {sidebarOpen ? <X size={20} /> : <Menu size={20} />}\n      </button>\n\n      {/* Sidebar */}\n      <aside\n        className={`fixed md:static top-0 left-0 h-full md:h-auto bg-white border-r w-64 p-6 transition-transform duration-300 z-40 ${\n          sidebarOpen ? \"translate-x-0\" : \"-translate-x-full md:translate-x-0\"\n        }`}\n      >\n        <h2 className=\"text-2xl font-semibold mb-6 text-gray-800\">\n          E-Slip Admin\n        </h2>\n        <nav className=\"space-y-4\">\n          <a href=\"#\" className=\"block text-gray-700 hover:text-blue-600\">\n            Dashboard\n          </a>\n          <a href=\"#\" className=\"block text-gray-700 hover:text-blue-600\">\n            Transactions\n          </a>\n          <a href=\"#\" className=\"block text-gray-700 hover:text-blue-600\">\n            Reports\n          </a>\n          <a href=\"#\" className=\"block text-gray-700 hover:text-blue-600\">\n            Settings\n          </a>\n        </nav>\n      </aside>\n\n      {/* Main Content */}\n      <main className=\"flex-1 p-6 md:p-10 overflow-x-auto\">\n        {/* Header */}\n        <div className=\"flex flex-col md:flex-row justify-between items-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-4 md:mb-0\">\n            Transaction Dashboard\n          </h1>\n          <div className=\"flex items-center gap-4\">\n            <Image src=\"/next.svg\" alt=\"Logo\" width={100} height={20} />\n          </div>\n        </div>\n\n        {/* Search Filters */}\n        <div className=\"bg-white p-6 rounded-xl shadow-sm mb-6 grid grid-cols-1 sm:grid-cols-3 gap-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Search by TID\"\n            value={search.tid}\n            onChange={handleSearchChange(\"tid\")}\n            className=\"border rounded-lg p-2 focus:ring-2 focus:ring-blue-400 outline-none\"\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Search by Mobile\"\n            value={search.mobile}\n            onChange={handleSearchChange(\"mobile\")}\n            className=\"border rounded-lg p-2 focus:ring-2 focus:ring-blue-400 outline-none\"\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Search by Txn Type\"\n            value={search.txn_type}\n            onChange={handleSearchChange(\"txn_type\")}\n            className=\"border rounded-lg p-2 focus:ring-2 focus:ring-blue-400 outline-none\"\n          />\n        </div>\n\n        {/* Data Table */}\n        <div className=\"overflow-x-auto bg-white rounded-xl shadow-sm\">\n          <table className=\"min-w-full border border-gray-200 text-sm text-gray-700\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"p-3 text-left\">Merchant</th>\n                <th className=\"p-3 text-left\">TID</th>\n                <th className=\"p-3 text-left\">MID</th>\n                <th className=\"p-3 text-left\">Txn Type</th>\n                <th className=\"p-3 text-left\">Amount</th>\n                <th className=\"p-3 text-left\">Mobile</th>\n                <th className=\"p-3 text-left\">Date</th>\n              </tr>\n            </thead>\n            <tbody>\n              {currentData.length > 0 ? (\n                currentData.map((txn) => (\n                  <tr\n                    key={txn.id}\n                    className=\"border-t hover:bg-gray-50 transition\"\n                  >\n                    <td className=\"p-3\">{txn.merchant_name}</td>\n                    <td className=\"p-3\">{txn.tid}</td>\n                    <td className=\"p-3\">{txn.mid}</td>\n                    <td className=\"p-3\">{txn.txn_type}</td>\n                    <td className=\"p-3\">{txn.amount?.toFixed(2) || \"0.00\"}</td>\n                    <td className=\"p-3\">{txn.mobile}</td>\n                    <td className=\"p-3\">{txn.txn_date}</td>\n                  </tr>\n                ))\n              ) : (\n                <tr>\n                  <td\n                    colSpan={7}\n                    className=\"p-4 text-center text-gray-500 italic\"\n                  >\n                    No transactions found\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n\n        {/* Pagination */}\n        {totalPages > 1 && (\n          <div className=\"flex justify-center items-center gap-2 mt-6\">\n            <button\n              onClick={() => handlePageChange(currentPage - 1)}\n              disabled={currentPage === 1}\n              className=\"px-3 py-1 border rounded-md bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-40\"\n            >\n              Prev\n            </button>\n\n            {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\n              <button\n                key={page}\n                onClick={() => handlePageChange(page)}\n                className={`px-3 py-1 rounded-md border ${\n                  currentPage === page\n                    ? \"bg-blue-600 text-white border-blue-600\"\n                    : \"bg-white text-gray-700 border-gray-300 hover:bg-gray-100\"\n                }`}\n              >\n                {page}\n              </button>\n            ))}\n\n            <button\n              onClick={() => handlePageChange(currentPage + 1)}\n              disabled={currentPage === totalPages}\n              className=\"px-3 py-1 border rounded-md bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-40\"\n            >\n              Next\n            </button>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}